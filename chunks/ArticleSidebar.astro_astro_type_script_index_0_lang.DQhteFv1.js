import{_ as h}from"./vendor-other.DbSZRnBI.js";import{ScrollProgress as f,BackToTopButton as u}from"./TableOfContentsEngine.BiLFpAoV.js";class p{sidebar;article;lastScrollY=0;ticking=!1;initialTop=96;scrollOffset=0;constructor(){this.sidebar=document.getElementById("toc-sidebar"),this.article=document.querySelector("article"),this.initialize()}initialize(){this.sidebar&&(this.sidebar.classList.add("floating"),this.updatePosition(),window.addEventListener("scroll",(()=>this.handleScroll()),{passive:!0}),window.addEventListener("resize",(()=>this.updatePosition()),{passive:!0}),this.checkArticleVisibility())}handleScroll(){this.ticking||(this.ticking=!0,requestAnimationFrame((()=>{this.updateFloatingPosition(),this.ticking=!1})))}updateFloatingPosition(){if(!this.sidebar||!this.article)return;const t=window.scrollY,i=t-this.lastScrollY;this.scrollOffset+=.08*i;this.scrollOffset=Math.max(-80,Math.min(80,this.scrollOffset));const s=1+1e-4*Math.abs(this.scrollOffset),e=.01*this.scrollOffset;this.sidebar.style.transform=`translateY(${this.scrollOffset}px) scale(${s}) rotateX(${e}deg)`;const a=Math.abs(i),r=Math.max(.85,1-.008*a);this.sidebar.style.opacity=r.toString();const n=Math.min(2,.1*a);this.sidebar.style.filter=`blur(${n}px)`,this.lastScrollY=t,setTimeout((()=>{this.sidebar&&(this.sidebar.style.opacity="1",this.sidebar.style.filter="blur(0px)")}),200)}updatePosition(){if(!this.sidebar)return;const t=window.innerHeight;this.sidebar.offsetHeight>t-this.initialTop&&(this.sidebar.style.height=t-this.initialTop-20+"px")}checkArticleVisibility(){this.sidebar&&this.article&&new IntersectionObserver((t=>{t.forEach((t=>{this.sidebar&&(t.isIntersecting?(this.sidebar.style.opacity="1",this.sidebar.style.transform="translateX(0)"):this.sidebar.style.opacity="0.6")}))}),{threshold:.1,rootMargin:"0px 0px -20% 0px"}).observe(this.article)}}let i=null,r=!1;function b(){r||(r=!0,h((async()=>{const{TableOfContents:t}=await import("./TableOfContentsEngine.BiLFpAoV.js");return{TableOfContents:t}}),[]).then((({TableOfContents:t})=>{new t})),i=new f,i&&("complete"===document.readyState?i.update():requestAnimationFrame((()=>{setTimeout((()=>i?.update()),100)}))),window.addEventListener("scroll",(()=>{i?.update()}),{passive:!0}),new u,new p)}document.addEventListener("astro:page-load",b),document.addEventListener("astro:before-swap",(()=>{r=!1,i=null}));