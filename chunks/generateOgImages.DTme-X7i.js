import{Resvg}from"@resvg/resvg-js";import satori from"satori";import{l as logger,S as SITE}from"./_astro_content.C3X8YU77.js";import{u as useTranslations,d as defaultLang}from"./utils.B5tQrnav.js";import{b as getAuthorDisplayName}from"./authors.39O-uUqB.js";const loadGoogleFont=async(e,t,r)=>{const i=`https://fonts.googleapis.com/css2?family=${e}:wght@${r}&text=${encodeURIComponent(t)}`,a=(await(await fetch(i,{headers:{"User-Agent":"Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_6_8; de-at) AppleWebKit/533.21.1 (KHTML, like Gecko) Version/5.0.5 Safari/533.21.1"}})).text()).match(/src: url\((.+?)\) format\('(opentype|truetype)'\)/);if(!a)throw new Error("Failed to download dynamic font");const o=await fetch(a[1]);if(!o.ok)throw new Error(`Failed to download dynamic font. Status: ${o.status}`);return o.arrayBuffer()},loadGoogleFonts=async e=>await Promise.all([{name:"Poppins",font:"Poppins",weight:400,style:"normal"},{name:"Poppins",font:"Poppins",weight:700,style:"normal"}].map((async({name:t,font:r,weight:i,style:a})=>({name:t,data:await loadGoogleFont(r,e,i),weight:i,style:a})))),OG_IMAGE_DIMENSIONS={width:1200,height:630},OG_COLORS={light:{backgroundGradient:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)",text:"#1a1a1a",textSecondary:"#555555",accent:"#3b5bdb",border:"#e5e7eb",glassShadow:"0 8px 32px rgba(0, 0, 0, 0.12)",glassBackground:"rgba(255, 255, 255, 0.95)"},site:{background:"#fefbfb",shadowBackground:"#ecebeb",border:"#000"},types:{pro:{primary:"#4CAF50",secondary:"#E8F5E9",gradient:"linear-gradient(135deg, #4CAF50 0%, #2E7D32 100%)",text:"#ffffff"},kontra:{primary:"#F44336",secondary:"#FFEBEE",gradient:"linear-gradient(135deg, #F44336 0%, #C62828 100%)",text:"#ffffff"},fragezeiten:{primary:"#FFC107",secondary:"#FFF8E1",gradient:"linear-gradient(135deg, #FFC107 0%, #FFA000 100%)",text:"#ffffff"}}},OG_TYPOGRAPHY={fontFamily:"Poppins",sizes:{title:{site:72,post:52},subtitle:28,author:18,authorLabel:12,category:14,badge:16,branding:20},weights:{bold:"700"}},OG_LAYOUT={borderRadius:"4px",borderWidth:"4px",margin:{outer:"2rem",inner:"20px",shadow:"2.5rem"},padding:{card:"48px",badge:"8px 16px",largeBadge:"12px 24px",branding:"12px 24px"},shadows:{card:"0 4px 15px rgba(0, 0, 0, 0.15)",branding:"0 2px 10px rgba(0, 0, 0, 0.08)"},opacity:{shadowLayer:.9}},OG_EFFECTS={blur:{backdrop:"blur(20px)",decorative:"blur(15px)",decorativeLight:"blur(5px)"}},postOgImage=async e=>{const t=e.data.title,r=await getAuthorDisplayName(e.data.author);logger.log("Generating OG image for post:",t,"by",r);const i=useTranslations(defaultLang)("author.name"),a="group"in e.data?e.data.group:"",o=OG_COLORS.types[a]||{primary:OG_COLORS.light.accent,secondary:"#f0f4ff",gradient:`linear-gradient(135deg, ${OG_COLORS.light.accent} 0%, #2b4bb2 100%)`,text:"#ffffff"};let n="ARTIKEL";o.primary===OG_COLORS.types.pro.primary?n="PRO":o.primary===OG_COLORS.types.kontra.primary?n="KONTRA":o.primary===OG_COLORS.types.fragezeiten.primary&&(n="FRAGEZEITEN");const s=("categories"in e.data&&e.data.categories||[]).slice(0,3),d=[e.data.title,r,SITE.title,n,i,...s].join(" ");return satori({type:"div",props:{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:OG_TYPOGRAPHY.fontFamily,position:"relative",overflow:"hidden",background:OG_COLORS.light.backgroundGradient},children:[{type:"div",props:{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:`radial-gradient(circle at 70% 30%, ${o.secondary}80 0%, transparent 50%)`,opacity:.6}}},{type:"div",props:{style:{position:"absolute",top:"-10%",right:"-10%",width:"300px",height:"300px",borderRadius:"50%",background:o.gradient,opacity:.2,filter:OG_EFFECTS.blur.decorative}}},{type:"div",props:{style:{position:"absolute",bottom:"-15%",left:"-15%",width:"400px",height:"400px",borderRadius:"50%",background:o.gradient,opacity:.1,filter:OG_EFFECTS.blur.decorativeLight}}},{type:"div",props:{style:{position:"relative",background:OG_COLORS.light.glassBackground,backdropFilter:OG_EFFECTS.blur.backdrop,borderRadius:OG_LAYOUT.borderRadius,boxShadow:OG_COLORS.light.glassShadow,border:`1px solid ${OG_COLORS.light.border}`,display:"flex",flexDirection:"column",justifyContent:"space-between",padding:OG_LAYOUT.padding.card,width:"90%",height:"80%",overflow:"hidden",zIndex:10},children:[{type:"div",props:{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"32px",flexWrap:"wrap",gap:"16px"},children:[{type:"div",props:{style:{display:"flex",flexWrap:"wrap",gap:"8px",flex:"1"},children:s.map((e=>({type:"span",props:{style:{background:o.secondary,color:o.primary,padding:OG_LAYOUT.padding.badge,borderRadius:OG_LAYOUT.borderRadius,fontSize:OG_TYPOGRAPHY.sizes.category,fontWeight:"600",border:`1px solid ${o.primary}20`},children:e}})))}},{type:"div",props:{style:{background:o.gradient,color:o.text,padding:OG_LAYOUT.padding.largeBadge,borderRadius:OG_LAYOUT.borderRadius,fontSize:OG_TYPOGRAPHY.sizes.badge,fontWeight:"bold",boxShadow:OG_LAYOUT.shadows.card,textTransform:"uppercase",letterSpacing:"0.5px"},children:n}}]}},{type:"div",props:{style:{display:"flex",flexDirection:"column",gap:"20px",marginBottom:"auto",position:"relative"},children:[{type:"div",props:{style:{width:"60px",height:"4px",background:o.gradient,borderRadius:"2px",marginBottom:"16px"}}},{type:"h1",props:{style:{fontSize:OG_TYPOGRAPHY.sizes.title.post,fontWeight:800,color:OG_COLORS.light.text,lineHeight:1.1,letterSpacing:"-0.02em",maxWidth:"95%",margin:0},children:t}}]}},{type:"div",props:{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",borderTop:`2px solid ${OG_COLORS.light.border}`,paddingTop:"24px",marginTop:"24px"},children:[{type:"div",props:{style:{display:"flex",alignItems:"center",gap:"16px"},children:[{type:"div",props:{style:{width:"56px",height:"56px",borderRadius:"50%",background:o.gradient,display:"flex",alignItems:"center",justifyContent:"center",color:"#ffffff",fontSize:24,fontWeight:"bold",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.1)"},children:r.charAt(0).toUpperCase()}},{type:"div",props:{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[{type:"span",props:{style:{fontSize:OG_TYPOGRAPHY.sizes.authorLabel,color:OG_COLORS.light.textSecondary,fontWeight:"500",letterSpacing:"0.5px"},children:i}},{type:"span",props:{style:{fontSize:OG_TYPOGRAPHY.sizes.author,fontWeight:"600",color:OG_COLORS.light.text},children:r}}]}}]}},{type:"div",props:{style:{display:"flex",alignItems:"center",gap:"12px",background:"rgba(255, 255, 255, 0.9)",padding:OG_LAYOUT.padding.branding,borderRadius:OG_LAYOUT.borderRadius,boxShadow:OG_LAYOUT.shadows.branding,border:`1px solid ${OG_COLORS.light.border}`},children:[{type:"span",props:{style:{fontSize:OG_TYPOGRAPHY.sizes.branding,fontWeight:"700",color:o.primary},children:SITE.title}}]}}]}}]}}]}},{width:OG_IMAGE_DIMENSIONS.width,height:OG_IMAGE_DIMENSIONS.height,embedFont:!0,fonts:await loadGoogleFonts(d)})},siteOgImage=async()=>satori({type:"div",props:{style:{background:OG_COLORS.site.background,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:[{type:"div",props:{style:{position:"absolute",top:"-1px",right:"-1px",border:`${OG_LAYOUT.borderWidth} solid ${OG_COLORS.site.border}`,background:OG_COLORS.site.shadowBackground,opacity:OG_LAYOUT.opacity.shadowLayer,borderRadius:OG_LAYOUT.borderRadius,display:"flex",justifyContent:"center",margin:OG_LAYOUT.margin.shadow,width:"88%",height:"80%"}}},{type:"div",props:{style:{border:`${OG_LAYOUT.borderWidth} solid ${OG_COLORS.site.border}`,background:OG_COLORS.site.background,borderRadius:OG_LAYOUT.borderRadius,display:"flex",justifyContent:"center",margin:OG_LAYOUT.margin.outer,width:"88%",height:"80%"},children:{type:"div",props:{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",margin:OG_LAYOUT.margin.inner,width:"90%",height:"90%"},children:[{type:"div",props:{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"90%",maxHeight:"90%",overflow:"hidden",textAlign:"center"},children:[{type:"p",props:{style:{fontSize:OG_TYPOGRAPHY.sizes.title.site,fontWeight:OG_TYPOGRAPHY.weights.bold},children:SITE.title}},{type:"p",props:{style:{fontSize:OG_TYPOGRAPHY.sizes.subtitle},children:SITE.desc}}]}},{type:"div",props:{style:{display:"flex",justifyContent:"flex-end",width:"100%",marginBottom:"8px",fontSize:OG_TYPOGRAPHY.sizes.subtitle},children:{type:"span",props:{style:{overflow:"hidden",fontWeight:OG_TYPOGRAPHY.weights.bold},children:new URL(SITE.website).hostname}}}}]}}}}]}},{width:OG_IMAGE_DIMENSIONS.width,height:OG_IMAGE_DIMENSIONS.height,embedFont:!0,fonts:await loadGoogleFonts(SITE.title+SITE.desc+SITE.website)});function svgBufferToPngBuffer(e){return new Resvg(e).render().asPng()}async function generateOgImageForPost(e){return svgBufferToPngBuffer(await postOgImage(e))}async function generateOgImageForSite(){return svgBufferToPngBuffer(await siteOgImage())}export{generateOgImageForPost as a,generateOgImageForSite as g};