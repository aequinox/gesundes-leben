import{_ as f}from"./vendor-other.DbSZRnBI.js";import{logger as n,LogLevelName as m}from"./logger.B6gmc7Y6.js";const r={pageTitle:"Suche",pageDescription:"Durchsuche alle Artikel nach relevanten Gesundheits- und Wellness-Inhalten...",ariaLabel:"Artikel-Suche",placeholder:"Artikel durchsuchen...",devWarning:"DEV-Modus Warnung! Du musst das Projekt mindestens einmal erstellen, um die Suchergebnisse während der Entwicklung zu sehen.",buildCommand:"bun run build",noResults:"Keine Ergebnisse für [SEARCH_TERM] gefunden",oneResult:"Ein Ergebnis für [SEARCH_TERM]",manyResults:"[COUNT] Ergebnisse für [SEARCH_TERM]",searching:"Suche nach [SEARCH_TERM]...",clearSearch:"Suche löschen",loadMore:"Mehr laden",filters:{label:"Filter",tags:"Kategorien",type:"Typ"},accessibility:{loading:"Suchfunktion wird geladen...",ready:"Suche bereit",focused:"Suchfeld fokussiert",cleared:"Suche gelöscht",searchStarted:"Suche nach {query} gestartet",error:"Fehler beim Laden der Suchfunktion"}},y={showSubResults:!0,showImages:!1,excerptLength:30,openFilters:["Inhaltstyp","Kategorie","Autor","Gesundheitsbereich","Lesedauer"]};n.configure({component:"search",minLevel:m.INFO});let o=null,l=null;function S(){const e=document.querySelector("#search-loading"),t=document.querySelector("#pagefind-search");e&&t&&(e.style.display="block",t.style.display="none")}function h(){const e=document.querySelector("#search-loading"),t=document.querySelector("#pagefind-search");e&&t&&(e.style.display="none",t.style.display="block")}function c(e){const t=document.querySelector("#search-announcements");t&&(t.textContent=e,setTimeout(()=>{t.textContent=""},1e3))}function u(e){try{e.target?.value.trim()===""&&(history.replaceState(history.state,"",window.location.pathname),n.debug("Search parameters reset"))}catch(t){n.error("Error resetting search parameters:",t)}}function b(){document.addEventListener("keydown",e=>{if((e.ctrlKey||e.metaKey)&&e.key==="k"){e.preventDefault();const t=document.querySelector(".pagefind-ui__search-input");t&&(t.focus(),c(r.accessibility.focused))}if(e.key==="Escape"){const t=document.querySelector(".pagefind-ui__search-input");t&&document.activeElement===t&&(t.value="",t.dispatchEvent(new Event("input",{bubbles:!0})),c(r.accessibility.cleared))}})}function g(){const e=document.querySelector("#pagefind-search");if(!e){n.warn("Pagefind search element not found");return}S(),c(r.accessibility.loading);const t=new URLSearchParams(window.location.search);(window.requestIdleCallback||(s=>setTimeout(s,1)))(async()=>{try{const{PagefindUI:s}=await f(async()=>{const{PagefindUI:a}=await import("./vendor-other.DbSZRnBI.js").then(i=>i.u);return{PagefindUI:a}},[]);n.debug("PagefindUI loaded successfully");const p=new s({element:"#pagefind-search",...y,translations:{placeholder:r.placeholder,clear_search:r.clearSearch,load_more:r.loadMore,search_label:r.ariaLabel,filters_label:r.filters.label,zero_results:r.noResults,many_results:r.manyResults,one_result:r.oneResult,searching:r.searching},processTerm(a){try{t.set("q",a),history.replaceState(history.state,"",`?${t.toString()}`);const i=e?.dataset?.backurl;return i&&sessionStorage.setItem("backUrl",`${i}?${t.toString()}`),n.debug(`Search term processed: ${a}`),a}catch(i){return n.error("Error processing search term:",i),a}}});n.info("Pagefind search initialized successfully"),h(),c(r.accessibility.ready),b();const d=t.get("q");d&&(p.triggerSearch(d),c(r.accessibility.searchStarted.replace("{query}",d))),o=document.querySelector(".pagefind-ui__search-input"),l=document.querySelector(".pagefind-ui__search-clear"),o?.addEventListener("input",a=>{u(a);const i=a.target.value;i.length>2&&c(r.searching.replace("[SEARCH_TERM]",i))}),l?.addEventListener("click",a=>{u(a),c(r.accessibility.cleared)})}catch(s){n.error("Failed to initialize Pagefind search:",s),h(),c(r.accessibility.error),e&&(e.style.display="block",e.innerHTML=`
            <div class="bg-destructive/10 border border-destructive/20 rounded p-4 mb-4">
              <p class="text-destructive font-medium">Suchfunktion konnte nicht geladen werden.</p>
              <p class="text-sm text-muted-foreground mt-2">Bitte lade die Seite neu oder kontaktiere den Support.</p>
              <button
                class="mt-3 px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90 transition-colors"
                onclick="window.location.reload()"
              >
                Seite neu laden
              </button>
            </div>
          `)}})}function E(){try{o&&(o.removeEventListener("input",u),o=null),l&&(l.removeEventListener("click",u),l=null),n.debug("Search component cleaned up")}catch(e){n.error("Error during search cleanup:",e)}}document.addEventListener("astro:after-swap",()=>{const e=document.querySelector("#pagefind-search");if(e&&e.querySelector("form")){n.debug("Search already initialized, skipping");return}n.debug("Initializing search after page swap"),g()});document.addEventListener("astro:before-swap",E);n.debug("Starting initial search initialization");g();
