/* Modern CSS Enhancements - 2025 */

@layer base {
  /* CSS Custom Properties for Modern Features */
  :root {
    /* Color semantic tokens */
    --color-success: oklch(65% 0.15 145deg);
    --color-warning: oklch(75% 0.16 80deg);
    --color-error: oklch(62% 0.2 20deg);
    --color-info: oklch(62% 0.17 215deg);

    /* Surface hierarchy */
    --surface-raised: var(--card);
    --surface-elevated: var(--surface2);
    --surface-floating: var(--surface3);

    /* Border radius scale */
    --radius-xs: 0.125rem;
    --radius-sm: 0.25rem;
    --radius-md: 0.375rem;
    --radius-lg: 0.5rem;
    --radius-xl: 0.75rem;
    --radius-2xl: 1rem;
    --radius-full: 9999px;

    /* Animation tokens */
    --duration-fast: 150ms;
    --duration-normal: 250ms;
    --duration-slow: 350ms;
    --duration-slower: 500ms;

    --easing-standard: cubic-bezier(0.4, 0, 0.2, 1);
    --easing-decelerate: cubic-bezier(0, 0, 0.2, 1);
    --easing-accelerate: cubic-bezier(0.4, 0, 1, 1);
    --easing-spring: cubic-bezier(0.68, -0.55, 0.265, 1.55);

    /* Focus ring system */
    --focus-ring: 0 0 0 2px var(--color-accent);
    --focus-ring-offset: 0 0 0 4px oklch(var(--color-accent) / 0.2);

    /* Container queries */
    --container-xs: 20rem;
    --container-sm: 24rem;
    --container-md: 28rem;
    --container-lg: 32rem;
    --container-xl: 36rem;
    --container-2xl: 42rem;
  }

  /* Modern CSS Reset Enhancements */
  *,
  *::before,
  *::after {
    box-sizing: border-box;
  }

  html {
    /* Improved scrolling */
    scroll-behavior: smooth;
    scroll-padding-top: 4rem;

    /* Better text rendering */
    text-size-adjust: 100%;
    -webkit-text-size-adjust: 100%;

    /* Motion preferences */
    @media (prefers-reduced-motion: reduce) {
      scroll-behavior: auto;
      * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
    }
  }

  body {
    /* Enhanced body styling */
    overflow-x: hidden;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;

    /* Modern scrollbar */
    scrollbar-gutter: stable;
  }

  /* Modern focus management */
  :focus {
    outline: none;
  }

  :focus-visible {
    outline: 2px solid var(--color-accent);
    outline-offset: 2px;
    border-radius: var(--radius-sm);
  }

  /* Enhanced interactive elements */
  button,
  [role="button"],
  input[type="submit"],
  input[type="button"] {
    cursor: pointer;
    border: none;
    background: none;
    font: inherit;

    &:disabled {
      cursor: not-allowed;
      opacity: 0.6;
    }

    &:focus-visible {
      box-shadow: var(--focus-ring), var(--focus-ring-offset);
    }
  }

  /* Modern link styling */
  a {
    color: inherit;
    text-decoration: none;

    &:hover {
      color: var(--color-accent);
    }

    &:focus-visible {
      box-shadow: var(--focus-ring), var(--focus-ring-offset);
      border-radius: var(--radius-sm);
    }
  }

  /* Enhanced form elements */
  input,
  textarea,
  select {
    font: inherit;
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    padding: 0.5rem 0.75rem;
    background: var(--color-background);
    color: var(--color-foreground);
    transition: border-color var(--duration-normal) var(--easing-standard);

    &:focus {
      border-color: var(--color-accent);
      box-shadow: var(--focus-ring);
    }

    &::placeholder {
      color: var(--color-muted);
      opacity: 1;
    }

    &:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      background: var(--color-card-muted);
    }
  }

  /* Modern media elements */
  img,
  video,
  canvas,
  svg {
    display: block;
    max-width: 100%;
    height: auto;
  }

  img {
    border-radius: var(--radius-lg);

    &[loading="lazy"] {
      opacity: 0;
      animation: fadeIn var(--duration-normal) var(--easing-decelerate) forwards;
    }
  }

  @keyframes fadeIn {
    to {
      opacity: 1;
    }
  }

  /* Container query contexts */
  .container {
    container-type: inline-size;
  }

  /* Modern utility classes */
  .surface-raised {
    background: var(--surface-raised);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-elevation-low);
  }

  .surface-elevated {
    background: var(--surface-elevated);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-elevation-medium);
  }

  .surface-floating {
    background: var(--surface-floating);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-elevation-high);
  }

  /* Modern button variants */
  .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 0.625rem 1.25rem;
    border-radius: var(--radius-lg);
    font-weight: 500;
    line-height: 1;
    transition: all var(--duration-normal) var(--easing-standard);

    &:hover {
      transform: translateY(-1px);
      box-shadow: var(--shadow-elevation-medium);
    }

    &:active {
      transform: translateY(0);
    }
  }

  .btn-primary {
    background: var(--color-accent);
    color: var(--color-background);

    &:hover {
      background: oklch(from var(--color-accent) calc(l * 0.9) c h);
    }
  }

  .btn-secondary {
    background: var(--color-card);
    color: var(--color-foreground);
    border: 1px solid var(--color-border);

    &:hover {
      background: var(--color-card-muted);
      border-color: var(--color-accent);
    }
  }

  .btn-ghost {
    background: transparent;
    color: var(--color-foreground);

    &:hover {
      background: var(--color-card-muted);
    }
  }

  /* Enhanced card component */
  .card {
    background: var(--color-card);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-xl);
    padding: 1.5rem;
    box-shadow: var(--shadow-elevation-low);
    transition: all var(--duration-normal) var(--easing-standard);

    &:hover {
      box-shadow: var(--shadow-elevation-medium);
      transform: translateY(-2px);
    }

    .card-header {
      margin-bottom: 1rem;

      .card-title {
        font-size: var(--font-size-xl);
        font-weight: 600;
        margin-bottom: 0.5rem;
        color: var(--color-foreground);
      }

      .card-description {
        color: var(--color-muted);
        font-size: var(--font-size-sm);
      }
    }

    .card-content {
      margin-bottom: 1rem;
    }

    .card-footer {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
    }
  }

  /* Modern badge system */
  .badge {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    padding: 0.25rem 0.75rem;
    border-radius: var(--radius-full);
    font-size: var(--font-size-xs);
    font-weight: 500;
    line-height: 1;

    &.badge-default {
      background: var(--color-badge);
      color: var(--color-background);
    }

    &.badge-success {
      background: var(--color-success);
      color: white;
    }

    &.badge-warning {
      background: var(--color-warning);
      color: black;
    }

    &.badge-error {
      background: var(--color-error);
      color: white;
    }
  }

  /* Enhanced loading states */
  .skeleton {
    background: linear-gradient(
      90deg,
      var(--color-card-muted) 25%,
      var(--color-card) 50%,
      var(--color-card-muted) 75%
    );
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
    border-radius: var(--radius-md);
  }

  @keyframes shimmer {
    0% {
      background-position: -200% 0;
    }
    100% {
      background-position: 200% 0;
    }
  }

  /* Modern dark mode transitions */
  * {
    transition-property: color, background-color, border-color, box-shadow;
    transition-duration: var(--duration-normal);
    transition-timing-function: var(--easing-standard);
  }

  /* High contrast mode support */
  @media (prefers-contrast: high) {
    :root {
      --color-border: CanvasText;
      --color-foreground: CanvasText;
      --color-background: Canvas;
      --color-accent: Highlight;
    }
  }

  /* Print optimizations */
  @media print {
    * {
      background: transparent !important;
      color: black !important;
      box-shadow: none !important;
    }

    .no-print {
      display: none !important;
    }

    a {
      text-decoration: underline;
    }

    .card {
      border: 1px solid black;
      break-inside: avoid;
    }
  }
}
