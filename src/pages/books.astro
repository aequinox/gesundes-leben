---
import { getCollection, type CollectionEntry } from "astro:content";
import type { BookData } from "@/types/books";
import Layout from "@/layouts/Layout.astro";
import BooksSection from "@/components/sections/Books.astro";
import Header from "@/components/sections/Header.astro";
import Footer from "@/components/sections/Footer.astro";

const allBooks = await getCollection("books");
const featuredBooks = allBooks.filter(
  (
    book: CollectionEntry<"books">
  ): book is CollectionEntry<"books"> & { data: BookData } =>
    book.data.featured === true
);
---

<Layout title="Buchtipps | Empfohlene Bücher für persönliches Wachstum">
  <Header />
  <main>
    <BooksSection
      books={featuredBooks}
      title="Buchtipps"
      description="Sorgfältig ausgewählte Bücher, die dich auf deinem Weg zu persönlichem Wachstum und Entwicklung unterstützen. Jedes Buch wurde von uns gelesen und für wertvoll befunden."
    />
  </main>
  <Footer />
</Layout>
