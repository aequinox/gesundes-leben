---
import Icon from "./Icon.astro";
import { useTranslations } from "@/i18n/utils";
import type { ui } from "@/i18n/ui";

interface Props {
  lang: keyof typeof ui;
}

const { lang }: Props = Astro.props;
const t = useTranslations(lang);
---

<button
  id="theme-btn"
  class="fill-skin-base p-2 rounded-full hover:bg-skin-accent/10 hover:text-skin-accent transition-all duration-200"
  title={t("nav.themeToggle")}
  aria-label="auto"
  aria-live="polite"
>
  <Icon name="moon" id="moon-svg" />
  <Icon name="sun" id="sun-svg" />
</button>

<script>
  import { themeService } from "@/services/ui/ThemeService";

  // Initialize theme functionality
  themeService.initThemeFeature();

  // Clean up on page unload
  window.addEventListener("beforeunload", () => {
    themeService.cleanup();
  });
</script>
